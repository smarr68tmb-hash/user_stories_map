# AI Agent MVP - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## –ß—Ç–æ —ç—Ç–æ?

MVP –≤–µ—Ä—Å–∏—è AI-–∞–≥–µ–Ω—Ç–∞ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ User Story Map —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –æ—à–∏–±–æ–∫.

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?

### –ü—Ä–æ—Å—Ç–æ–π flow (3 —à–∞–≥–∞):

1. **Generate** - –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫–∞—Ä—Ç—É –æ–¥–Ω–∏–º –∑–∞–ø—Ä–æ—Å–æ–º –∫ AI
2. **Validate** - –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É (–ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ Activities, Tasks, Stories, acceptance criteria)
3. **Fix** - –û–¥–Ω–∞ –ø–æ–ø—ã—Ç–∫–∞ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### 1. –ß–µ—Ä–µ–∑ API

```bash
# –° –∞–≥–µ–Ω—Ç–æ–º (–Ω–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥)
curl -X POST "http://localhost:8000/generate-map" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "text": "–ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –¥–æ—Å—Ç–∞–≤–∫–∏ –µ–¥—ã",
    "use_agent": true
  }'

# –ë–µ–∑ –∞–≥–µ–Ω—Ç–∞ (—Å—Ç–∞—Ä—ã–π –ø–æ–¥—Ö–æ–¥)
curl -X POST "http://localhost:8000/generate-map" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "text": "–ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –¥–æ—Å—Ç–∞–≤–∫–∏ –µ–¥—ã",
    "use_agent": false
  }'
```

### 2. –ß–µ—Ä–µ–∑ Python

```python
from services.agent_service import SimpleAgent

# –°–æ–∑–¥–∞–µ–º –∞–≥–µ–Ω—Ç–∞
agent = SimpleAgent(
    enable_validation=True,  # –í–∫–ª—é—á–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é
    enable_fix=True,         # –í–∫–ª—é—á–∏—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫
    redis_client=None        # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: Redis –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
)

# –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∫–∞—Ä—Ç—É
result = agent.generate_map(
    "–ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –¥–æ—Å—Ç–∞–≤–∫–∏ –µ–¥—ã",
    use_cache=True
)

# –†–µ–∑—É–ª—å—Ç–∞—Ç
print(f"Product: {result['productName']}")
print(f"Activities: {len(result['map'])}")
print(f"Validation score: {result['metadata']['validation']['score']}")
```

## –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞

```json
{
  "productName": "–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞",
  "personas": ["–ü–µ—Ä—Å–æ–Ω–∞ 1", "–ü–µ—Ä—Å–æ–Ω–∞ 2"],
  "map": [
    {
      "activity": "–ù–∞–∑–≤–∞–Ω–∏–µ Activity",
      "tasks": [
        {
          "taskTitle": "–ù–∞–∑–≤–∞–Ω–∏–µ Task",
          "stories": [
            {
              "title": "–ù–∞–∑–≤–∞–Ω–∏–µ Story",
              "description": "–ö–∞–∫ [–ø–µ—Ä—Å–æ–Ω–∞], —è —Ö–æ—á—É...",
              "priority": "MVP",
              "acceptanceCriteria": ["–ö—Ä–∏—Ç–µ—Ä–∏–π 1", "–ö—Ä–∏—Ç–µ—Ä–∏–π 2"]
            }
          ]
        }
      ]
    }
  ],
  "metadata": {
    "agent_version": "mvp",
    "validation": {
      "is_valid": true,
      "issues": [],
      "score": 0.95
    },
    "metrics": {
      "total_time": 12.5,
      "generation_time": 10.2,
      "validation_time": 0.3,
      "fix_time": 2.0,
      "provider_used": "gemini",
      "fix_attempted": true,
      "fix_successful": true,
      "critical_issues_before_fix": 2,
      "critical_issues_after_fix": 0
    }
  }
}
```

## –ú–µ—Ç—Ä–∏–∫–∏

–ê–≥–µ–Ω—Ç –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –º–µ—Ç—Ä–∏–∫–∏:

- `total_time` - –û–±—â–µ–µ –≤—Ä–µ–º—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ (—Å–µ–∫—É–Ω–¥—ã)
- `generation_time` - –í—Ä–µ–º—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- `validation_time` - –í—Ä–µ–º—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- `fix_time` - –í—Ä–µ–º—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–µ—Å–ª–∏ –±—ã–ª–æ)
- `provider_used` - –ö–∞–∫–æ–π AI –ø—Ä–æ–≤–∞–π–¥–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è (gemini/groq/openai)
- `fix_attempted` - –ë—ã–ª–æ –ª–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫
- `fix_successful` - –£—Å–ø–µ—à–Ω–æ –ª–∏ –ø—Ä–æ—à–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
- `critical_issues_before_fix` - –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫ –¥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- `critical_issues_after_fix` - –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫ –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

## –í–∞–ª–∏–¥–∞—Ü–∏—è

–ê–≥–µ–Ω—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:

‚úÖ –ù–∞–ª–∏—á–∏–µ –ø–µ—Ä—Å–æ–Ω (personas)
‚úÖ –ù–∞–ª–∏—á–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∫–∞—Ä—Ç—ã (map)
‚úÖ –ú–∏–Ω–∏–º—É–º 3 Activities
‚úÖ –ù–∞–ª–∏—á–∏–µ Tasks –≤ –∫–∞–∂–¥–æ–π Activity
‚úÖ –ù–∞–ª–∏—á–∏–µ Stories –≤ –∫–∞–∂–¥–æ–π Task
‚úÖ –ù–∞–ª–∏—á–∏–µ acceptance criteria –≤ Stories (–º–∏–Ω–∏–º—É–º 2)
‚úÖ –ù–∞–ª–∏—á–∏–µ –Ω–∞–∑–≤–∞–Ω–∏–π –∏ –æ–ø–∏—Å–∞–Ω–∏–π

### Severity —É—Ä–æ–≤–Ω–∏:

- **critical** - –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ (–æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã)
- **warning** - –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è (–Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ acceptance criteria, –Ω–µ—Ç –æ–ø–∏—Å–∞–Ω–∏–π)

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:

1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å AI API –∫–ª—é—á –≤ `.env`:
   ```bash
   # –û–¥–∏–Ω –∏–∑ —Å–ª–µ–¥—É—é—â–∏—Ö (–≤ –ø–æ—Ä—è–¥–∫–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞):
   GEMINI_API_KEY=your_gemini_key
   GROQ_API_KEY=your_groq_key
   OPENAI_API_KEY=your_openai_key
   PERPLEXITY_API_KEY=your_perplexity_key
   ```

2. (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) Redis –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è:
   ```bash
   REDIS_URL=redis://localhost:6379
   ```

### –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ:

–ê–≥–µ–Ω—Ç –∫–µ—à–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –Ω–∞ 24 —á–∞—Å–∞ –∏—Å–ø–æ–ª—å–∑—É—è Redis:
- –ö–ª—é—á –∫–µ—à–∞: `agent:mvp:{sha256(requirements)}`
- TTL: 86400 —Å–µ–∫—É–Ω–¥ (24 —á–∞—Å–∞)

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤:

```bash
cd backend
source venv/bin/activate
python test_agent.py
```

### –¢–µ—Å—Ç—ã –≤–∫–ª—é—á–∞—é—Ç:

1. **–ü—Ä–æ—Å—Ç—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è** - –ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –¥–æ—Å—Ç–∞–≤–∫–∏ –µ–¥—ã
2. **–°–ª–æ–∂–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è** - SaaS –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞–º–∏
3. **–ë–µ–∑ –≤–∞–ª–∏–¥–∞—Ü–∏–∏** - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏ —Å/–±–µ–∑ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

### –ü—Ä–∏–º–µ—Ä—ã —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ç–µ—Å—Ç–æ–≤:

```
üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï MVP –ê–ì–ï–ù–¢–ê

–¢–ï–°–¢ 1: –ü—Ä–æ—Å—Ç—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞!
  - –û–±—â–µ–µ –≤—Ä–µ–º—è: 12.50s
  - –ü—Ä–æ–≤–∞–π–¥–µ—Ä: gemini
  - –í–∞–ª–∏–¥–∞—Ü–∏—è score: 0.95
  - –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º: 0

–¢–ï–°–¢ 2: –°–ª–æ–∂–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞!
  - Activities: 5
  - –í—Å–µ–≥–æ stories: 24
  - –í—Ä–µ–º—è: 18.30s
```

## –°—Ä–∞–≤–Ω–µ–Ω–∏–µ: –ê–≥–µ–Ω—Ç vs –û–±—ã—á–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è

| –ê—Å–ø–µ–∫—Ç | –û–±—ã—á–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è | –° –∞–≥–µ–Ω—Ç–æ–º |
|--------|-------------------|-----------|
| **–ó–∞–ø—Ä–æ—Å–æ–≤ –∫ AI** | 1 | 1-2 (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ) |
| **–í–∞–ª–∏–¥–∞—Ü–∏—è** | –ù–µ—Ç | –î–∞ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è) |
| **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫** | –ù–µ—Ç | –î–∞ (1 –ø–æ–ø—ã—Ç–∫–∞) |
| **–í—Ä–µ–º—è** | ~8-12s | ~10-15s (+20-30%) |
| **–ö–∞—á–µ—Å—Ç–≤–æ** | 70-80% | 85-95% (+15-20%) |
| **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å** | –ß–µ—Ä–Ω—ã–π —è—â–∏–∫ | –í–∏–¥–Ω—ã –º–µ—Ç—Ä–∏–∫–∏ –∏ –ø—Ä–æ–±–ª–µ–º—ã |

## –ü–ª–∞–Ω—ã –Ω–∞ –±—É–¥—É—â–µ–µ

### –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (–µ—Å–ª–∏ MVP —É—Å–ø–µ—à–µ–Ω):

1. **–ü–æ—à–∞–≥–æ–≤–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è**:
   - –û—Ç–¥–µ–ª—å–Ω–æ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å Activities ‚Üí Tasks ‚Üí Stories
   - WebSocket –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞

2. **–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è**:
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
   - Semantic similarity –º–µ–∂–¥—É stories
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ acceptance criteria

3. **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏—Ç–µ—Ä–∞—Ü–∏–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**:
   - –î–æ 3 –ø–æ–ø—ã—Ç–æ–∫ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫–∏
   - –ü—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ

4. **Function Calling**:
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Gemini Function Calling –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏
   - –ë–æ–ª–µ–µ —Ç–æ—á–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è —á–µ—Ä–µ–∑ AI

5. **–ú–µ—Ç—Ä–∏–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**:
   - Dashboard –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞
   - A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞ vs –æ–±—ã—á–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
   - –°–±–æ—Ä feedback –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è MVP

‚ùå –¢–æ–ª—å–∫–æ 1 –ø–æ–ø—ã—Ç–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–Ω–µ –∏—Ç–µ—Ä–∞—Ç–∏–≤–Ω–æ–µ)
‚ùå –ù–µ—Ç Function Calling (–ø—Ä–æ—Å—Ç–∞—è –ø—Ä–æ–º–ø—Ç-–∏–Ω–∂–µ–Ω–µ—Ä–∏—è)
‚ùå –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
‚ùå –ù–µ—Ç semantic similarity –ø—Ä–æ–≤–µ—Ä–∫–∏
‚ùå –ù–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–∞ (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–∞–∂–µ—Ç—Å—è –¥–æ–ª–≥–æ–π)
‚ùå –ù–µ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º validation_service

## Troubleshooting

### "No AI providers configured"

–î–æ–±–∞–≤—å—Ç–µ API –∫–ª—é—á –≤ `.env`:
```bash
GEMINI_API_KEY=your_key_here
```

### "Redis unavailable"

–ê–≥–µ–Ω—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ Redis, –Ω–æ –±–µ–∑ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è. –î–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è –∫–µ—à–∞:
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ Redis
redis-server

# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Docker
docker run -d -p 6379:6379 redis
```

### –ú–µ–¥–ª–µ–Ω–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º—É—é –º–æ–¥–µ–ª—å –≤ `config.py`
2. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ—Ç–∫–ª—é—á–∏—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫:
   ```python
   agent = SimpleAgent(enable_fix=False)
   ```

## –ö–æ–Ω—Ç–∞–∫—Ç—ã

–í–æ–ø—Ä–æ—Å—ã –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è: —Å–æ–∑–¥–∞–π—Ç–µ issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞.

---

**–í–µ—Ä—Å–∏—è**: MVP 1.0
**–î–∞—Ç–∞**: 2025-12-05
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
