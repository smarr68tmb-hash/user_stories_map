{
  "id": -100,
  "name": "Hybe Assist - Проактивные рекомендации",
  "raw_requirements": "Система проактивных рекомендаций от Full-пользователей к Self-клиентам в Hybe Assist. Full-пользователь может инициировать рекомендации по оптимизации кампаний без предварительной заявки. Self-пользователь может просматривать и применять рекомендации в один клик.",
  "demo_mode": true,
  "activities": [
    {
      "id": -101,
      "title": "Создание рекомендации (Full)",
      "position": 0,
      "tasks": [
        {
          "id": -1001,
          "title": "Выбор кампании",
          "position": 0,
          "stories": [
            {
              "id": -10001,
              "title": "Переход в режим Hybe Assist",
              "description": "As a Full-пользователь, I want to переходить в режим создания рекомендации со страницы статистики кампаний, so that я могу быстро инициировать оптимизацию без лишних переходов между разделами",
              "priority": "MVP",
              "acceptance_criteria": [
                "GIVEN я Full-пользователь на странице статистики кампаний",
                "WHEN я нахожу кнопку 'Создать рекомендацию' в правом верхнем углу",
                "THEN кнопка видна и активна",
                "AND при клике открывается режим выбора кампании",
                "AND отображается структура папок с кампаниями (сохраняется иерархия)",
                "AND в header показывается breadcrumb: Статистика → Создание рекомендации",
                "AND кнопка disabled если у пользователя нет активных кампаний"
              ],
              "release_id": -1,
              "position": 0,
              "status": "todo"
            },
            {
              "id": -10002,
              "title": "Выбор одной кампании из списка",
              "description": "As a Full-пользователь, I want to выбрать одну кампанию из моего списка, so that я могу сфокусироваться на создании целевой рекомендации для конкретной кампании",
              "priority": "MVP",
              "acceptance_criteria": [
                "GIVEN я нахожусь в режиме выбора кампании",
                "WHEN я вижу список кампаний",
                "THEN отображаются кампании со статусом 'Активные' и 'Неактивные'",
                "AND сохраняется структура папок (иерархия не ломается)",
                "AND используются radio buttons (выбор только одной кампании)",
                "AND кнопка 'Далее' disabled до момента выбора",
                "AND при выборе кампания подсвечивается голубым бордером",
                "AND показывается краткая статистика выбранной кампании (показы, клики за последние 7 дней)"
              ],
              "release_id": -1,
              "position": 1,
              "status": "todo"
            }
          ]
        },
        {
          "id": -1002,
          "title": "Настройка рекомендации",
          "position": 1,
          "stories": [
            {
              "id": -10003,
              "title": "Изменение настроек кампании",
              "description": "As a Full-пользователь, I want to изменять любые настройки кампании включая скрытые от Self, so that я могу рекомендовать оптимизации недоступные Self-пользователю самостоятельно",
              "priority": "MVP",
              "acceptance_criteria": [
                "GIVEN я выбрал кампанию и перешел к настройкам",
                "WHEN я открываю панель редактирования",
                "THEN все настройки кампании доступны для изменения (budget, targeting, creative, bidding)",
                "AND скрытые настройки (CCO, Ensemble, Advanced ML) доступны без ограничений",
                "AND интерфейс идентичен обычному редактору кампаний",
                "AND для каждого измененного поля отображается diff: 'старое → новое'",
                "AND измененные поля подсвечиваются желтым маркером",
                "AND есть кнопка 'Сбросить изменения' для отмены всех правок"
              ],
              "release_id": -1,
              "position": 0,
              "status": "todo"
            },
            {
              "id": -10004,
              "title": "Добавление комментария",
              "description": "As a Full-пользователь, I want to добавлять текстовый комментарий к рекомендации, so that я могу объяснить Self-пользователю почему я рекомендую эти изменения",
              "priority": "MVP",
              "acceptance_criteria": [
                "GIVEN я нахожусь на странице настройки рекомендации",
                "WHEN я кликаю на '+ Добавить комментарий'",
                "THEN появляется textarea поле",
                "AND поле принимает от 3 до 1000 символов",
                "AND комментарий опциональный (валидация срабатывает только если начал печатать)",
                "AND показывается live counter: '245 / 1000 символов'",
                "AND при превышении лимита текст обрезается и показывается warning",
                "AND можно свернуть поле обратно кликом на '−' без потери текста"
              ],
              "release_id": -1,
              "position": 1,
              "status": "todo"
            },
            {
              "id": -10005,
              "title": "Валидация перед созданием",
              "description": "As a система, I want to проверять что рекомендация содержит хотя бы комментарий или изменение настройки, so that Self-пользователь не получает пустую рекомендацию без контекста",
              "priority": "MVP",
              "acceptance_criteria": [
                "GIVEN я на странице создания рекомендации",
                "WHEN не заполнен комментарий AND не изменена ни одна настройка",
                "THEN кнопка 'Создать' disabled (серая, не кликабельная)",
                "AND при hover на кнопку показывается tooltip: 'Добавьте комментарий или измените настройку'",
                "WHEN я заполнил комментарий OR изменил хотя бы одну настройку",
                "THEN кнопка 'Создать' становится активной (синяя, кликабельная)",
                "AND перед отправкой проверяется API-валидация: POST /recommendations/validate",
                "AND при ошибке валидации показывается красный alert с текстом ошибки"
              ],
              "release_id": -1,
              "position": 2,
              "status": "todo"
            }
          ]
        },
        {
          "id": -1003,
          "title": "Отправка рекомендации",
          "position": 2,
          "stories": [
            {
              "id": -10006,
              "title": "Создание рекомендации в системе",
              "description": "As a Full-пользователь, I want to создавать рекомендацию которая сохраняется в системе, so that Self-пользователь получит уведомление и сможет просмотреть мои предложения",
              "priority": "MVP",
              "acceptance_criteria": [
                "GIVEN я заполнил все данные и нажал 'Создать'",
                "WHEN выполняется POST /api/recommendations",
                "THEN рекомендация сохраняется в БД со статусом 'Не просмотрено'",
                "AND рекомендация появляется в табе 'Рекомендации' у Self-пользователя",
                "AND счетчик у таба увеличивается на +1",
                "AND Full видит созданную рекомендацию в своем списке со статусом 'Отправлено'",
                "AND показывается success notification: 'Рекомендация отправлена'",
                "AND происходит редирект на страницу списка моих рекомендаций"
              ],
              "release_id": -1,
              "position": 0,
              "status": "todo"
            },
            {
              "id": -10007,
              "title": "Email-уведомление Self-пользователю",
              "description": "При создании рекомендации отправляется email всем Self-администраторам",
              "priority": "MVP",
              "acceptance_criteria": [
                "Письмо отправляется администраторам (не @hybe.io, не @hybrid.ai)",
                "Тема: 'Новая рекомендация Hybe Assist в %Аккаунт%'",
                "Тело: название кампании и приложения",
                "Отправка с noreply@hybe.io",
                "Логирование ошибок отправки в Elastic"
              ],
              "release_id": -1,
              "position": 1,
              "status": "todo"
            }
          ]
        }
      ]
    },
    {
      "id": -102,
      "title": "Просмотр рекомендаций (Self)",
      "position": 1,
      "tasks": [
        {
          "id": -1004,
          "title": "Таб 'Рекомендации'",
          "position": 0,
          "stories": [
            {
              "id": -10008,
              "title": "Отображение таблицы рекомендаций",
              "description": "As a Self-администратор, I want to видеть список всех рекомендаций в одной таблице, so that я могу быстро ориентироваться какие оптимизации мне предложили",
              "priority": "MVP",
              "acceptance_criteria": [
                "GIVEN я Self-пользователь с permissionType=1 (Администратор)",
                "WHEN я открываю таб 'Рекомендации' в разделе Hybe Assist",
                "THEN вижу таблицу с колонками: Дата, Статус, Название РК, Приложение, Инициатор",
                "AND данные загружаются через GET /api/recommendations?role=self",
                "AND таб видят ТОЛЬКО пользователи с уровнем 'Администратор' (permissionType=1)",
                "AND счетчик на табе показывает количество со статусом 'Не просмотрено'",
                "AND статусы отображаются бейджами: 'Не просмотрено' (красный), 'Просмотрено' (серый)",
                "AND если рекомендаций нет показывается empty state: 'Новых рекомендаций пока нет'"
              ],
              "release_id": -1,
              "position": 0,
              "status": "todo"
            },
            {
              "id": -10009,
              "title": "Поиск и фильтрация",
              "description": "Self может искать и фильтровать рекомендации",
              "priority": "Release 1",
              "acceptance_criteria": [
                "Поиск от 3 символов по кампании/приложению",
                "Фильтр 'Все' показывает все рекомендации",
                "Фильтр 'Непросмотренные' с счетчиком",
                "Сортировка по дате, названию РК, приложению"
              ],
              "release_id": -2,
              "position": 1,
              "status": "todo"
            },
            {
              "id": -10010,
              "title": "Просмотр деталей рекомендации",
              "description": "При клике на строку открывается модальное окно с деталями",
              "priority": "MVP",
              "acceptance_criteria": [
                "При наведении появляется опция 'Просмотреть'",
                "При открытии статус меняется 'Не просмотрено' → 'Просмотрено'",
                "Модальное окно показывает изменения старое/новое",
                "Кнопка 'Перейти в кампанию' (открывается в новой вкладке)"
              ],
              "release_id": -1,
              "position": 2,
              "status": "todo"
            }
          ]
        },
        {
          "id": -1005,
          "title": "Модальное окно рекомендации",
          "position": 1,
          "stories": [
            {
              "id": -10011,
              "title": "Отображение изменений",
              "description": "Self видит только доступные ему настройки в формате старое → новое",
              "priority": "MVP",
              "acceptance_criteria": [
                "История изменений в формате 'было → стало'",
                "Скрытые настройки не отображаются для Self",
                "Дата создания рекомендации",
                "Комментарий Full (если был добавлен)"
              ],
              "release_id": -1,
              "position": 0,
              "status": "todo"
            },
            {
              "id": -10012,
              "title": "Кнопка 'Перейти в кампанию'",
              "description": "Переход в настройки кампании для которой создана рекомендация",
              "priority": "MVP",
              "acceptance_criteria": [
                "Кнопка видна для Full и Self",
                "Открывается в новой вкладке",
                "Открывает страницу настроек конкретной кампании"
              ],
              "release_id": -1,
              "position": 1,
              "status": "todo"
            }
          ]
        }
      ]
    },
    {
      "id": -103,
      "title": "Применение рекомендации (Self)",
      "position": 2,
      "tasks": [
        {
          "id": -1006,
          "title": "Принятие изменений",
          "position": 0,
          "stories": [
            {
              "id": -10013,
              "title": "Кнопка 'Применить изменения'",
              "description": "As a Self-администратор, I want to применить все рекомендованные настройки в один клик, so that я могу быстро оптимизировать кампанию без ручного копирования параметров",
              "priority": "MVP",
              "acceptance_criteria": [
                "GIVEN я просматриваю рекомендацию в модальном окне",
                "WHEN я нажимаю 'Применить изменения'",
                "THEN выполняется PATCH /api/campaigns/{id}/apply-recommendation",
                "AND все изменения применяются к кампании атомарно (транзакция)",
                "AND применяются ВСЕ настройки включая скрытые от Self (CCO, Ensemble)",
                "AND после успешного применения модальное окно закрывается",
                "AND рекомендация перемещается в таб 'Ответы' со статусом 'Принято'",
                "AND показывается success notification: 'Изменения применены к кампании {название}'",
                "AND в случае ошибки API показывается rollback и error message"
              ],
              "release_id": -1,
              "position": 0,
              "status": "todo"
            },
            {
              "id": -10014,
              "title": "Email-уведомление Full о принятии",
              "description": "При принятии отправляется письмо инициатору рекомендации",
              "priority": "MVP",
              "acceptance_criteria": [
                "Письмо отправляется Full-пользователю (инициатору)",
                "Тема: 'Ответ на рекомендацию Hybe Assist в %Аккаунт%'",
                "Тело: менеджер принял рекомендацию",
                "Логирование ошибок в Elastic"
              ],
              "release_id": -1,
              "position": 1,
              "status": "todo"
            }
          ]
        },
        {
          "id": -1007,
          "title": "Отклонение изменений",
          "position": 1,
          "stories": [
            {
              "id": -10015,
              "title": "Кнопка 'Отклонить изменения'",
              "description": "As a Self-администратор, I want to отклонить рекомендацию с указанием причины, so that Full-пользователь понимает почему его предложение не подходит",
              "priority": "MVP",
              "acceptance_criteria": [
                "GIVEN я просматриваю рекомендацию",
                "WHEN я нажимаю 'Отклонить изменения'",
                "THEN открывается модальное окно 'Укажите причину отклонения'",
                "AND поле причины обязательно: от 3 до 1000 символов",
                "AND показывается live counter: 'X / 1000 символов'",
                "AND кнопка 'Отправить' disabled до момента валидации (мин. 3 символа)",
                "AND кнопка 'Назад' возвращает к просмотру рекомендации без сохранения",
                "AND при отправке выполняется POST /api/recommendations/{id}/reject с телом {reason: string}"
              ],
              "release_id": -1,
              "position": 0,
              "status": "todo"
            },
            {
              "id": -10016,
              "title": "Сохранение отклонения",
              "description": "При отклонении изменения НЕ применяются к кампании",
              "priority": "MVP",
              "acceptance_criteria": [
                "Настройки кампании НЕ изменяются",
                "Рекомендация перемещается в таб 'Ответы'",
                "У Full появляется в фильтре 'Новые отклоненные'",
                "Причина отклонения сохраняется"
              ],
              "release_id": -1,
              "position": 1,
              "status": "todo"
            },
            {
              "id": -10017,
              "title": "Email-уведомление Full об отклонении",
              "description": "При отклонении отправляется письмо с причиной инициатору",
              "priority": "MVP",
              "acceptance_criteria": [
                "Письмо отправляется Full-пользователю",
                "Тема: 'Ответ на рекомендацию Hybe Assist в %Аккаунт%'",
                "Тело содержит причину отклонения",
                "Логирование ошибок в Elastic"
              ],
              "release_id": -1,
              "position": 2,
              "status": "todo"
            }
          ]
        }
      ]
    },
    {
      "id": -104,
      "title": "Управление рекомендациями (Full)",
      "position": 3,
      "tasks": [
        {
          "id": -1008,
          "title": "Просмотр созданных рекомендаций",
          "position": 0,
          "stories": [
            {
              "id": -10018,
              "title": "Таблица рекомендаций для Full",
              "description": "Full видит все созданные им рекомендации и их статусы",
              "priority": "MVP",
              "acceptance_criteria": [
                "Колонки: Дата, Статус, РК, Приложение, Инициатор",
                "Поиск от 3 символов по РК/приложению/инициатору",
                "Сортировка по дате, названию РК, приложению",
                "Нет фильтров (только поиск)"
              ],
              "release_id": -1,
              "position": 0,
              "status": "todo"
            },
            {
              "id": -10019,
              "title": "Просмотр деталей (Full)",
              "description": "Full может открыть любую рекомендацию для просмотра",
              "priority": "MVP",
              "acceptance_criteria": [
                "Модальное окно в режиме 'только чтение'",
                "Видны все изменения включая скрытые от Self",
                "Нет кнопок действий (только просмотр)",
                "Кнопка 'Перейти в кампанию'"
              ],
              "release_id": -1,
              "position": 1,
              "status": "todo"
            }
          ]
        },
        {
          "id": -1009,
          "title": "Таб 'Ответы'",
          "position": 1,
          "stories": [
            {
              "id": -10020,
              "title": "Просмотр принятых/отклоненных",
              "description": "Full видит результаты своих рекомендаций в табе Ответы",
              "priority": "Release 1",
              "acceptance_criteria": [
                "Отклоненные рекомендации в фильтре 'Новые отклоненные'",
                "Видна причина отклонения от Self",
                "Принятые рекомендации также отображаются",
                "Счетчик новых ответов"
              ],
              "release_id": -2,
              "position": 0,
              "status": "todo"
            }
          ]
        }
      ]
    },
    {
      "id": -105,
      "title": "Уведомления и счетчики",
      "position": 4,
      "tasks": [
        {
          "id": -1010,
          "title": "Счетчик раздела Hybe Assist",
          "position": 0,
          "stories": [
            {
              "id": -10021,
              "title": "Счетчик для Full",
              "description": "Показывает количество непросмотренных заявок (старая логика)",
              "priority": "Release 1",
              "acceptance_criteria": [
                "Отображает заявки со статусом 'Не просмотрено'",
                "Логика не изменяется"
              ],
              "release_id": -2,
              "position": 0,
              "status": "todo"
            },
            {
              "id": -10022,
              "title": "Счетчик для Self",
              "description": "Сумма непросмотренных ответов и рекомендаций",
              "priority": "Release 1",
              "acceptance_criteria": [
                "Ответы со статусом 'Не просмотрено' (старая логика)",
                "+ Рекомендации со статусом 'Не просмотрено'",
                "Отображается общая сумма"
              ],
              "release_id": -2,
              "position": 1,
              "status": "todo"
            }
          ]
        },
        {
          "id": -1011,
          "title": "Email-уведомления",
          "position": 1,
          "stories": [
            {
              "id": -10023,
              "title": "Настройка email-сервиса",
              "description": "Интеграция с email-сервисом для отправки уведомлений",
              "priority": "MVP",
              "acceptance_criteria": [
                "Отправка с noreply@hybe.io",
                "Только русский язык",
                "Логирование ошибок в Elastic",
                "Retry механизм при сбоях"
              ],
              "release_id": -1,
              "position": 0,
              "status": "todo"
            }
          ]
        }
      ]
    },
    {
      "id": -106,
      "title": "Права доступа",
      "position": 5,
      "tasks": [
        {
          "id": -1012,
          "title": "Управление видимостью таба",
          "position": 0,
          "stories": [
            {
              "id": -10024,
              "title": "Доступ только для Администраторов",
              "description": "As a система безопасности, I want to ограничить доступ к табу 'Рекомендации' только Администраторами, so that чувствительная информация о настройках кампаний не доступна рядовым менеджерам",
              "priority": "MVP",
              "acceptance_criteria": [
                "GIVEN пользователь залогинен в систему",
                "WHEN система проверяет user.permissionType",
                "THEN Full Администратор (permissionType=1) - таб видит",
                "AND Self Администратор (permissionType=1) - таб видит",
                "AND Agency Manager (permissionType=2) - таб НЕ видит (скрыт из навигации)",
                "AND Manager (permissionType=3) - таб НЕ видит (скрыт из навигации)",
                "AND при попытке прямого доступа через URL возвращается 403 Forbidden",
                "AND проверка прав происходит как на frontend так и на backend (двойная защита)"
              ],
              "release_id": -1,
              "position": 0,
              "status": "todo"
            },
            {
              "id": -10025,
              "title": "Ограничение по TradingDesk",
              "description": "Функционал доступен только для Hybe TradingDesk",
              "priority": "MVP",
              "acceptance_criteria": [
                "Проверка что пользователь относится к Hybe",
                "Для других TradingDesk таб скрыт"
              ],
              "release_id": -1,
              "position": 1,
              "status": "todo"
            }
          ]
        }
      ]
    }
  ],
  "releases": [
    {
      "id": -1,
      "title": "MVP",
      "position": 0
    },
    {
      "id": -2,
      "title": "Release 1",
      "position": 1
    },
    {
      "id": -3,
      "title": "Later",
      "position": 2
    }
  ]
}
